<script type="text/javascript">
    RED.nodes.registerType('While-loop', {
      category: 'Classical feedforward and control flow',
      color: '#aaaaaa',
      defaults: {
        name: { value: "While loop" },
        info: {
          value: "# A while loop is used to repeat instructions while some condition is satisfied.\n&nbsp;\n# In the example below, we apply Hadamard gates to two qubits and measure them. Then, we create a while loop that repeats this procedure while the measurement outcome is 11. As a result, the final measurement should never be 11, with the remaining possibilities appearing with approximately equal frequency.\n```python\nqubits = QuantumRegister(2)\nclbits = ClassicalRegister(2)\ncircuit = QuantumCircuit(qubits, clbits)\n \nq0, q1 = qubits\nc0, c1 = clbits\n \ncircuit.h([q0, q1])\ncircuit.measure(q0, c0)\ncircuit.measure(q1, c1)\nwith circuit.while_loop((clbits, 0b11)):\n    circuit.h([q0, q1])\n    circuit.measure(q0, c0)\n    circuit.measure(q1, c1)\n \ncircuit.draw(\"mpl\")\n \n# example output counts: {'01': 334, '10': 368, '00': 322}\n```\n# The code will use the code snippets from \"Introduction to classical feedforward and control flow\" node to run on the simulator and store the statistical results in the `counts` variable. In the results, the proportions of occurrences for each condition should be generally consistent.\n&nbsp;\n# The result is sent to \"While loop Measure\" node and you can check it in the debug sidebar. You can also check the Image of the circuit in the \"While loop Circuit Diagram\" node.\n\n***\n&nbsp;\n## **Node Output:**\n- # Dictionary: `counts`\n- # Image: The image of `circuit`"
        }
      },
      inputs: 1,
      outputs: 1,
      icon: "file.svg",
      label: function () {
        return this.name || "While loop";
      }
    });
  </script>
  
  <script type="text/html" data-template-name="While-loop">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
  </script>
  
  <script type="text/html" data-help-name="While-loop">
    <p>A node that introduce while loop in qiskit.</p>

    <h3>Outputs</h3>
    <ol class="node-ports">
      <li>Dictionary
        <dl class="message-properties">
          <dt>counts<span class="property-type">dict</span></dt>
          <dd>The result of running circuits on simulator in 1024 shots. The key represents the quantum state, and the value is the number of times the quantum is in that state out of 1024 shots.</dd>
        </dl>
      </li>
      <li>Circuit Diagram
        <dl class="message-properties">
          <dt>circuit_diagram <span class="property-type">string (Base64)</span></dt>
          <dd>The Base64-encoded string representing the visual diagram of the quantum circuit.</dd>
        </dl>
      </li>
    </ol>

    <h3>Details</h3>
    <p>
      This node provides an introduction to implementing a quantum while loop using Qiskit. It demonstrates how to apply Hadamard gates to two qubits, measure their states, and use a while loop to repeat this process until a specific measurement outcome (11 in this case) is no longer observed. This example showcases the basic concepts of quantum measurement and looping in quantum circuits, providing a practical insight into how quantum computations can be controlled and manipulated.
    </p>
  </script>