
<script type="text/javascript">
    RED.nodes.registerType("pulse-link-cal-to-custom-cir-another", {
      category: "Add calibrations to custom gate",
      color: "#DAC4B4",
      defaults: {
        name: { value: "Link calibration to your custom gate in another way" },
        info: { value: "# To link a calibration to your custom gate, you can also add to <font style='background: lightgrey'>_Target_</font> and transpile. A pass manager pass implicitly extracts calibration data from the target and calls <font style='background: lightgrey'>_`add_calibration`_</font>. This is convenient if you need to attach a calibration to multiple circuits or manage multiple calibrations.\r\n&nbsp;\r\n# The following code shows you how to add to <font style='background: lightgrey'>_Target_</font> and transpile.\r\n```python\r\nfrom qiskit_ibm_runtime.fake_provider import FakeKyoto\r\nfrom qiskit.circuit import QuantumCircuit, Gate\r\nfrom qiskit.pulse import builder, DriveChannel\r\nfrom qiskit.transpiler import InstructionProperties\r\n \r\nbackend = FakeKyoto()\r\n \r\ncustom_gate = Gate(\"my_gate\", 1, [])\r\nqc = QuantumCircuit(1, 1)\r\nqc.append(custom_gate, [0])\r\nqc.measure(0, 0)\r\n \r\nwith builder.build() as custom_sched_q0:\r\n    builder.play([0.1] * 160, DriveChannel(0))\r\n \r\nbackend.target.add_instruction(\r\n    custom_gate,\r\n    {(0,): InstructionProperties(calibration=custom_sched_q0)},\r\n)\r\n \r\n# Re-generate the passmanager with the new backend target\r\npassmanager = generate_preset_pass_manager(optimization_level=1, backend=backend)\r\nqc = passmanager.run(qc)\r\n```\r\n# The diagram of optimized quantum circuit is displayed below the \"Another optimized custom gate\" node.\r\n\r\n***\r\n&nbsp;\r\n## **Node Output:**\r\n- # Image:  the image of optimized circuit `qc`"}
      },
      inputs: 1,
      outputs: 1,
      icon: "file.svg",
      label: function () {
        return this.name || "Link calibration to your custom gate in another way";
      },
    });

  </script>
  
  <script type="text/html" data-template-name="pulse-link-cal-to-custom-cir-another">
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Link calibration to your custom gate in another way" />
    </div>

  </script>

  
  
  <script type="text/html" data-help-name="pulse-link-cal-to-custom-cir-another">
    <p>A simple node that link the calibration to your custom gate by Target.</p>

    <h3>Outputs</h3>
    <ol class="node-ports">
      <li>Circuit Diagram
        <dl class="message-properties">
          <dt>circuit_diagram <span class="property-type">string (Base64)</span></dt>
          <dd>The Base64-encoded string representing the visual diagram of the quantum circuit.</dd>
        </dl>
      </li>
    </ol>
  
    <h3>Details</h3>
    <p>
      This node provides an introduction to linking a custom gate calibration to a quantum circuit using Qiskit. It demonstrates how to add a custom gate to a backend's target and transpile a circuit while implicitly extracting calibration data. This is particularly useful for attaching a calibration to multiple circuits or managing multiple calibrations efficiently. 
    </p>
  </script>
  